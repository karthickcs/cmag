<ngb-accordion [closeOthers]="true" activeIds="static-1" class="next-accordion">
  <ngb-panel id="static-1">
    <ng-template ngbPanelTitle>
      <h5><a href="javascript:">+ SEARCH PANEL</a></h5>
    </ng-template>
    <ng-template ngbPanelContent>
      <div class="col-md-6">
        <div class="form-group">
          <label for="exampleFormControlSelect1">Task ID</label>
          
          <select class="form-select" name="taskid" id="taskid" [(ngModel)]="taskid" (ngModelChange)="loadruniddata(false)">
            <option value="0" disabled selected >Select Task</option>    
            <option *ngFor="let taskmain of taskmainArray" [value]="taskmain.taskid">
                {{taskmain.taskname}} ---> {{taskmain.taskid}}
              </option>
          </select>
        </div>
     
    </div>
    <div class="col-md-6">
        <div class="form-group">
          <label for="exampleFormControlSelect2">Run ID</label>
          <select class="form-select" name="runidselect" id="runidselect" [(ngModel)]="runidselect" (ngModelChange)="loadrunid()" >
            <option value="0" disabled selected >Select RunID</option>  
            <option *ngFor="let dplisten of dplistenArray" [value]="dplisten.runid">
               Run Id ---> {{dplisten.runid}}
              </option>
          </select>
        </div>
        
      </div>
     
    <hr>
    <div class="table-responsive ">
      <table class="table table-bordered table-sm">
        <thead>
          <tr class="table-secondary">
             
            <th>TaskName</th>
            <th>TaskId</th>
            <th>Type</th>
            
            <th>Jdbcurlsys1</th>
            <th>Jdbcurlsys2</th>
            <th>usernamesys1</th>
            <th>usernamesys2</th>
            <th>dbtypesys1</th>
            <th>tablenamesys1</th>
            <th>dbtypesys2</th>
            <th>tablenamesys2</th>
            
            <th>RowCount</th>
            <th>Filelocation1</th>
            <th>Filelocation2</th>

  
          </tr>
        </thead>
        <tbody>
          <tr class="table-light" >
             
          
            <td>{{dplistenentry.taskname}}</td>
              <td>{{dplistenentry.taskid}}</td>
  
              <td>{{dplistenentry.sys1type}}</td>
             
  
              <td>{{dplistenentry.jdbcurlsys1}}</td>
              <td>{{dplistenentry.jdbcurlsys2}}</td>
              <td>{{dplistenentry.usernamesys1}}</td>
              <td>{{dplistenentry.usernamesys2}}</td>
              <td>{{dplistenentry.dbtypesys1}}</td>
              <td>{{dplistenentry.tablenamesys1}}</td>
              <td>{{dplistenentry.dbtypesys2}}</td>
              <td>{{dplistenentry.tablenamesys2}}</td>
             
              <td>{{dplistenentry.rowcount}}</td>
              <td>{{dplistenentry.filelocation}}</td>
              <td>{{dplistenentry.filelocationt2}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  
    
    </ng-template>
  </ngb-panel>
   
   
</ngb-accordion>


<div class="row">
  <div class="col-md-6">
    <div class="form-group">
      <label for="exampleFormControlSelect1">Transaction ID</label>
      <br>
      <select class="form-select" name="tranid" id="tranid" [(ngModel)]="tranid" (ngModelChange)="loadtramdata()">
          <option value="0" disabled selected >Select TransactionID</option>
          <option *ngFor="let diffval of diffTableDTOArray" [value]="diffval.maintranid">
           TranId ---> {{read(diffval.maintranid)}}
          </option>
      </select>
      
    </div>
 
</div>
    <br>
          <div class="row">
        <div class="col-sm-12">
            <app-card cardTitle="Comparision" [options]="false">
              
                <div class="row">
                    
                    <div class="col-md-12">
                        <form action="javascript:">
                          <div class="table-responsive ">
                            <table class="table table-bordered table-sm">
                              <thead>
                                <tr class="table-secondary">
                                  <th>#</th>  
                                  <th>BaseSystem -Transactionid</th>
                                  <th>UpdatedSystem -Transactionid</th>
                                  <!-- <th>Difference</th> -->
                        
                                  <th>Difference</th>
                                  
                        
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="table-light" >
                                  <td>1</td>
                                  <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: blue;" value="{{read(diffTableDTO.maintranid)}}" readonly></td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: blue;" value={{read(diffTableDTO.newtranid)}} readonly></td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: blue;" value={{diffTableDTO.countval}} readonly></td>
                           
                                   
                                   
                                </tr>
                              </tbody>
                            </table>
                          </div>
                    
                            <!-- <div class="form-group">
                                <label>Transaction ID</label>
                                <input type="text" name="TransactionId" [(ngModel)]="diffTableDTO.newtranid" class="form-control" readonly>
                            </div>
                            <div class="form-group">
                                <label>NewTransaction ID</label>
                                <input type="text" name="newTransactionId" [(ngModel)]="diffTableDTO.maintranid" class="form-control" readonly>
                            </div>
    
                            <div class="form-group">
                                <label>DifferenceCount</label>
                                <input type="text" name="countval" [(ngModel)]="diffTableDTO.countval" class="form-control" readonly>
                            </div> -->
    
                           
                           
                            <div *ngIf="changeDTOArray.length > 0" class="table-responsive ">
                              <h4>Difference</h4>
                              <table class="table table-bordered table-sm">
                                <thead>
                                  <tr class="table-secondary">
                                    <th>#</th>
                                    <th colspan="2">Base System</th>
                                    <th>#</th>
                                    <th colspan="2">Updated System</th>
                                     
                                  </tr>
                                  <tr class="table-secondary">
                                    <th>#</th>
                                    <th>ColumnName</th>
                                    <th>Value</th>
                                    <th>#</th>
                                    <th>ColumnName</th>
                                    <th>Value</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr class="table-light" *ngFor="let diffobj  of changeDTOArray; let i = index">
                                    <td>{{i+1}}</td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: blue;" value="{{diffobj.field}}" readonly></td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: rgb(5, 92, 57);" value="{{diffobj.oldval}}" readonly></td>
                                    <td>{{i+1}}</td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: blue;" value="{{diffobj.field}}" readonly></td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: red;" value="{{diffobj.newval}}" readonly></td>
                           
                                     
                                     
                                  </tr>
                                </tbody>
                              </table>
                            </div>

                            
                           
                            <div *ngIf="removeDTOArray.length > 0" class="table-responsive ">
                              <h4>Missing </h4>
                              <table class="table table-bordered table-sm">
                                <thead>
                                  <tr class="table-secondary">
                                    <th>#</th>
                                    <th colspan="2">Base System</th>
                                    <th>#</th> 
                                    <th colspan="2">Updated System</th>
                                     
                                  </tr>
                                  <tr class="table-secondary">
                                    <th>#</th>
                                    <th>ColumnName</th>
                                    <th>Value</th>
                                    <th>#</th>
                                    <th>ColumnName</th>
                                    <th>Value</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr class="table-light" *ngFor="let removeobj  of removeDTOArray; let i = index">
                                    <td>{{i+1}}</td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: blue;" value="{{removeobj.field}}" readonly></td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: green;" value="{{removeobj.oldval}}" readonly></td>
                                    <td>{{i+1}}</td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: blue;" value="{{removeobj.field}}" readonly></td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: red;" value="Missing Tags" readonly></td>
                           
                                   
                                     
                                  </tr>
                                </tbody>
                              </table>
                            </div>

                            
                            
                            <div *ngIf="addDTOArray.length > 0" class="table-responsive ">
                              <h4>Additional</h4>
                              <table class="table table-bordered table-sm">
                                <thead>
                                  <tr class="table-secondary">
                                    <th>#</th>
                                    <th colspan="2">Base System</th>
                                    <th>#</th> 
                                    <th colspan="2">Updated System</th>
                                     
                                  </tr>
                                  <tr class="table-secondary">
                                    <th>#</th>
                                    <th>ColumnName</th>
                                    <th>Value</th>
                                    <th>#</th>
                                    <th>ColumnName</th>
                                    <th>Value</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr class="table-light" *ngFor="let addobj  of addDTOArray; let i = index">
                                    <td>{{i+1}}</td>
                                    
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle;  color: blue;" value="{{addobj.field}}" readonly></td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: red;" value="Missing Tags" readonly></td>
                                    <td>{{i+1}}</td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle;  color: blue;" value="{{addobj.field}}" readonly></td>
                                    <td><input type="text" style="width:96%;text-align: left; vertical-align: middle; color: green;" value="{{addobj.oldval}}" readonly></td>
                                    
                           
                                                             
                                     
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                      
                            <!-- <div class="form-group">
                                <label for="exampleFormControlTextarea1">ADD</label>
                                <textarea class="form-control" name="adddifferencetxtarea" [(ngModel)] = "addfields" id="adddifferencetxtarea" rows="3"></textarea>
                            </div> 
                            <div class="form-group">
                                <label for="exampleFormControlTextarea1">Remove</label>
                                <textarea class="form-control" name="deldifferencetxtarea" [(ngModel)] = "removefields" id="deldifferencetxtarea" rows="3"></textarea>
                            </div>  -->
                               
                            <!-- <div class="form-group">
                                <label for="exampleFormControlTextarea1">Difference</label>
                                <textarea class="form-control" name="differencetxtarea" [(ngModel)] = "diffTableDTO.difference" id="differencetxtarea" rows="10"></textarea>
                            </div>   -->
                            
                        </form>
                    </div>
                </div>
    
            </app-card>
        </div>
    </div>